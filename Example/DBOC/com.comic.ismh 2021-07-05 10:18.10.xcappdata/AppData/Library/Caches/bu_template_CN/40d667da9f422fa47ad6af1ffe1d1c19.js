/*! For license information please see vendors~lp-sdk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{354:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"resumeWebglContext",(function(){return T})),n.d(r,"hackWebglCanvas",(function(){return P})),n.d(r,"isWebglCanvasHacked",(function(){return k})),n.d(r,"anythingTo2dCanvas",(function(){return L})),n.d(r,"ERgbDetectError",(function(){return O})),n.d(r,"isPlainRgb",(function(){return I}));var i={};n.r(i),n.d(i,"getPlayableComponent",(function(){return W})),n.d(i,"loadComponent",(function(){return H})),n.d(i,"waitWebglSupport",(function(){return Z})),n.d(i,"MAX_RETRY_MAXIMUM",(function(){return J})),n.d(i,"RETRY_INTERVAL_MINIMUM",(function(){return $})),n.d(i,"rgbDetect",(function(){return Q}));var o={};n.r(o),n.d(o,"createTimeout",(function(){return j})),n.d(o,"getNow",(function(){return F})),n.d(o,"getPerformanceFn",(function(){return N})),n.d(o,"createTimer",(function(){return A})),n.d(o,"wait",(function(){return V})),n.d(o,"noop",(function(){return tt})),n.d(o,"guid",(function(){return nt})),n.d(o,"isConstructable",(function(){return rt})),n.d(o,"onTransitionEnd",(function(){return lt})),n.d(o,"applyStyle",(function(){return Ct})),n.d(o,"createKeyframes",(function(){return St})),n.d(o,"fade",(function(){return Et})),n.d(o,"syntheticTapTapEvent",(function(){return Tt})),n.d(o,"checkDomAttr",(function(){return Pt})),n.d(o,"htmlStrToNode",(function(){return kt})),n.d(o,"getIOSVersion",(function(){return ft})),n.d(o,"getAndroidVersion",(function(){return vt})),n.d(o,"isIOS",(function(){return mt})),n.d(o,"isAndroid",(function(){return gt})),n.d(o,"isTouchable",(function(){return yt})),n.d(o,"POINTER_DOWN",(function(){return bt})),n.d(o,"POINTER_CLICK",(function(){return _t})),n.d(o,"POINTER_UP",(function(){return wt})),n.d(o,"isCallable",(function(){return xt})),n.d(o,"CANVAS_CONTEXT_TYPE",(function(){return z})),n.d(o,"getCanvasCurrentContext",(function(){return G})),n.d(o,"isWebglContext",(function(){return Y})),n.d(o,"isPreserveDrawingBuffer",(function(){return X})),n.d(o,"isSupportWebglRenderContext",(function(){return K})),n.d(o,"createScriptNode",(function(){return B})),n.d(o,"loadScript",(function(){return U})),n.d(o,"ELogLevel",(function(){return C})),n.d(o,"logger",(function(){return R}));var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function u(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function p(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}Object.create;var d,h,f,v,m,g=n(42);!function(t){t.legacy="legacy",t.expressShow="expressShow"}(d||(d={})),function(t){t[t.mute=1]="mute",t[t.notMute=2]="notMute"}(h||(h={})),function(t){t[t.LOADING=1]="LOADING",t[t.PLAY=2]="PLAY",t[t.PAUSE=3]="PAUSE",t[t.ERROR=4]="ERROR",t[t.COMPLETE=5]="COMPLETE"}(f||(f={})),function(t){t[t.error=-100]="error",t[t.init=0]="init",t[t.ready=10]="ready",t[t.running=20]="running",t[t.destroyed=100]="destroyed"}(v||(v={})),function(t){t.noComponentConstructor="NO_COMPONENT_CONSTRUCTOR",t.noComponentInstance="NO_COMPONENT_INSTANCE",t.bootstrapFailed="BOOTSTRAP_FAILED",t.renderFailed="RENDER_FAILED"}(m||(m={}));var y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var b=function(){return(b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function _(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function w(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function x(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}Object.create;var C,S=null,E="__hacked_webgl_buffer";function T(){S&&(HTMLCanvasElement.prototype.getContext=S,S=null)}function P(){if(S)return T;S=HTMLCanvasElement.prototype.getContext;var t={preserveDrawingBuffer:!0,stencil:!0},e=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];switch((e[0]||"").toLowerCase()){case"webgl":case"webgl2":case"experimental-webgl":e[1]=b(b({},e[1]),t)}return null==S?void 0:S.apply(this,e)};return HTMLCanvasElement.prototype.getContext=e,e[E]=!0,T}function k(){var t=HTMLCanvasElement.prototype.getContext;return Boolean(t[E])}!function(t){t[t.debug=0]="debug",t[t.info=1]="info",t[t.log=2]="log",t[t.warn=3]="warn",t[t.error=4]="error"}(C||(C={}));var O,M,R=new(function(){function t(t,e){this._level=C.warn,this._tag="",this._tag="["+t+"]",void 0!==e&&(this._level=e)}return t.prototype.setLevel=function(t){this._level=t},t.prototype.setTag=function(t){this._tag="["+t+"]"},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._level>C.debug||console.debug.apply(console,x([this._tag],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._level>C.log||console.info.apply(console,x([this._tag],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.info.apply(this,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._level>C.warn||console.warn.apply(console,x([this._tag],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,x([this._tag],t))},t}());function L(t){var e=document.createElement("canvas"),n=e.getContext("2d");if(!t)return Promise.resolve(null);if(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement){var r=t.width,i=t.height;return e.width=Math.max(100,r),e.height=Math.max(100,i),n?(n.drawImage(t,0,0),Promise.resolve(e)):Promise.resolve(null)}return n&&"string"==typeof t?new Promise((function(r){var i=new Image;i.onload=function(){var t=i.width,o=i.height;e.width=Math.max(100,t),e.height=Math.max(100,o),n.drawImage(i,0,0),r(e)},i.src=t,i.onerror=function(t){R.error(t),r(null)}})):Promise.resolve(null)}function I(t){return _(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,c,u,l,p,d;return w(this,(function(h){switch(h.label){case 0:return t instanceof ImageData?(e=t,[3,6]):[3,1];case 1:n=void 0,r=void 0,h.label=2;case 2:return h.trys.push([2,4,,5]),[4,L(t)];case 3:return n=h.sent(),r=(null==n?void 0:n.getContext("2d"))||null,[3,5];case 4:throw i=h.sent(),R.error(O.unknown,i),i.reason=O.unknown,i;case 5:if(!r||!n)throw R.error(O.getContextFailed),new Error(O.getContextFailed);e=r.getImageData(0,0,n.width,n.height),h.label=6;case 6:for(o=[],[[.1,.1],[.1,.5],[.1,.9],[.5,.1],[.5,.5],[.5,.9],[.9,.1],[.9,.5],[.9,.9]].forEach((function(t){var n=t[0],r=t[1];o=o.concat(function(t,e,n){for(var r=[],i=t.width,o=t.height,s=e.x,a=e.y,c=Math.round(n/2),u=Math.round(i*s),l=Math.round(o*a),p=Math.max(1,u-c),d=Math.max(1,l-c),h=0;h<=n;++h)for(var f=0;f<=n;++f){var v=p+h,m=d+f;r.push((m-1)*i+v-1)}return r}({width:e.width,height:e.height},{x:n,y:r},10))})),s={},a=0;a<o.length&&!((c=4*o[a])+4>=e.data.length);++a)u=e.data,l=[u[c++],u[c++],u[c++],u[c]],s[p="rgba("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]/255+")"]=s[p]||0,s[p]+=1;return[2,{rgbaArray:d=Object.keys(s).map((function(t){return{color:t,count:s[t]}})).sort((function(t,e){return e.count-t.count})),isPlain:1===d.length}]}}))}))}function j(t,e){var n=setTimeout((function(){e()}),t);return function(){clearTimeout(n)}}function F(){return performance&&performance.now?performance.now():(new Date).getTime()}function N(){var t=F();return function(){return F()-t}}function A(t){var e=N(),n=t.then((function(t){return n.duration=e(),t})).catch((function(t){throw n.duration=e(),t}));return n}function V(t){return new Promise((function(e){return setTimeout(e,t)}))}function B(t){var e=document.createElement("script");return e.type="text/javascript",e.async=Boolean(t),e}function U(t,e,n){var r=function(){if(M||(M=document.querySelector("head")),!M)throw new Error("Element head is not exists!");return M}();return new Promise((function(i,o){!function s(a){var c=B(n);function u(){c.parentNode&&c.parentNode.removeChild(c)}function l(t){u(),d(),e&&a<e?s(a+1):o(t)}function p(){u(),i(),d()}function d(){c.removeEventListener("error",l),c.removeEventListener("load",p)}n&&c.setAttribute("data-async-module","true"),c.src=t,c.addEventListener("error",l),c.addEventListener("load",p),r.appendChild(c)}(1)}))}!function(t){t.unknown="UNKNOWN_FAIL_REASON",t.getContextFailed="GET_2D_CONTEXT_FAILED"}(O||(O={}));var D={};function W(t){return window.getPlayableComponent?window.getPlayableComponent(t):D[t]}function H(t){return _(this,void 0,void 0,(function(){var e,n,r;return w(this,(function(i){switch(i.label){case 0:if(e=t.src,n=t.retryTimes,r=t.async,{}.hasOwnProperty.call(D,e))return[2,D[e]];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,A(U(e,n,r))];case 2:return i.sent(),function(t){if(!window.PlayableComponent)throw new Error("[PlayableComponent]: Component is not exported to window");D[t]=window.PlayableComponent,window.PlayableComponent=void 0}(e),[2,D[e]];case 3:throw i.sent();case 4:return[2]}}))}))}"undefined"!=typeof window&&(window.getPlayableComponent=function(t){return D[t]});var z=["webgl","webgl2","experimental-webgl","2d"];function G(t){for(var e=null,n="",r=0;r<z.length&&(e=t.getContext(z[r]),n=z[r],!e);r++);return{context:e,contextType:n}}var q=["webgl2","webgl"];function Y(t){return q.includes(G(t).contextType)}function X(t){var e,n=G(t),r=n.contextType,i=n.context;return!!q.includes(r)&&Boolean(null===(e=i.getContextAttributes())||void 0===e?void 0:e.preserveDrawingBuffer)}function K(){var t=document.createElement("canvas"),e=t.getContext("webgl2")||t.getContext("webgl")||t.getContext("experimental-webgl");return Boolean(e)}function Z(t){var e,n=t||{},r=n.maxTrial,i=void 0===r?24:r,o=n.ms,s=void 0===o?160:o,a=Math.max(i,36),c=Math.min(s,160),u=1,l=function(){clearTimeout(e)},p=new Promise((function(t){var n=function(){K()?t(u):u<=a?(u+=1,e=setTimeout(n,c)):l()};n()}));return p.cancel=l,p}var J=20,$=500;function Q(t){var e=this,n=0,r=t.component,i=Math.min(J,t.maxRetry),o=Math.max($,t.retryInterval);var s=function(){return _(e,void 0,void 0,(function(){var e,a,c,u,l,p,d,h=this;return w(this,(function(f){switch(f.label){case 0:return e=function(){return _(h,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return n+=1,[4,V(o)];case 1:return t.sent(),[2,s()]}}))}))},(a="function"==typeof t.input?t.input():t.input)?(c=a instanceof HTMLCanvasElement&&Y(a),u=c&&X(a),l=a,p="internal",!c||u?[3,2]:r.capture?[4,r.capture()]:[3,2]):[3,3];case 1:(d=f.sent())&&(l=d,p="component"),f.label=2;case 2:return[2,A(I(l)).then((function(t){return _(h,void 0,void 0,(function(){return w(this,(function(r){return!t.isPlain||n>=i?[2,b(b({},t),{retryCount:n,extra:{detectInputType:p,isPreserveDrawingBuffer:u,usingWebgl:c}})]:[2,e()]}))}))}))];case 3:return n>=i?[2,Promise.resolve({isPlain:!0,rgbaArray:[],retryCount:n})]:[2,e()]}}))}))};return s()}function tt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}var et=0;function nt(t){return void 0===t&&(t=""),""+t+ ++et}function rt(t){return t.prototype&&t.prototype.constructor===t&&Object.getOwnPropertyNames(t.prototype).length>1||/^function\b\s[A-Z].*/.test(t.toString())||/^class\b/.test(t.toString())}var it={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},ot="";if("undefined"!=typeof document)for(var st=document.createElement("div").style,at=Object.keys(it),ct=0,ut=at[ct];ct<at.length;ut=at[ct+=1])if(ut in st){ot=it[ut];break}function lt(t,e){return t.addEventListener(ot,e),function(){return t.removeEventListener(ot,e)}}var pt=n(361),dt=n.n(pt),ht="undefined"==typeof window;function ft(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)||[];return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||"0",10)]}return[]}function vt(){var t=navigator.userAgent.match(/Android [\d+\.]{2,5}/);return t?t[0].replace("Android ","").split(".").map((function(t){return parseInt(t,10)})):[]}var mt=Boolean(ft().length),gt=Boolean(vt().length),yt=!ht&&"ontouchstart"in window,bt=yt?["touchstart"]:["mousedown"],_t=x(x([],bt),["click"]),wt=yt?["touchend"]:["mouseup"],xt="function"==typeof document.all&&void 0===document.all?function(t){return"function"==typeof t&&void 0!==t}:function(t){return"function"==typeof t};function Ct(t,e){Object.keys(e).forEach((function(n){var r=e[n];t.style[n]=r}))}function St(t,e){var n;if(Array.isArray(e)){var r=e[0],i=e[1];n={from:r,to:i}}else n=e;var o=Object.keys(n).reduce((function(t,e){var r=e;Number(r)<1&&(r=100*Number(r)+"%");var i=n[e];return t+(r+" {\n  "+Object.keys(i).reduce((function(t,e){return""+t+e+": "+i[e]+";\n"}),"")+" }\n")}),"");return["-webkit-","-moz-","-o-",""].reduce((function(e,n){return e+("@"+n+"keyframes "+t+" {\n "+o+" }\n")}),"")}function Et(t,e,n,r){return void 0===n&&(n=500),void 0===r&&(r="ease"),_(this,void 0,void 0,(function(){var i,o;return w(this,(function(s){return Ct(t,{transition:i="opacity "+n/1e3+"s "+r,webkitTransition:i}),o="in"===e,[2,new Promise((function(e){dt()((function(){Ct(t,{opacity:o?"1":"0"});var n=lt(t,(function(){Ct(t,{transition:"",webkitTransition:""}),e(),n()}))}))}))]}))}))}function Tt(t){var e={x:0,y:0},n={x:0,y:0};function r(r){var i="touchstart"===r.type||"mousedown"===r.type?e:n;if("touchstart"===r.type||"touchend"===r.type){var o=r.changedTouches[0];i.x=o.clientX,i.y=o.clientY}else{var s=r;i.x=s.clientX,i.y=s.clientY}if("touchend"===r.type||"mouseup"===r.type){var a=Math.abs(n.x-e.x),c=Math.abs(n.y-e.y);if(a<5&&c<5){var u=new Event("taptap",r);t.dispatchEvent(u)}}}return bt.concat(wt).forEach((function(e){t.addEventListener(e,r)})),function(){bt.concat(wt).forEach((function(e){t.removeEventListener(e,r)}))}}function Pt(t,e,n){if(void 0===n&&(n=document.body),!t)return!1;for(;t&&t!==n;){if(t.hasAttribute(e))return!0;t=t.parentElement}return!1}function kt(t){var e=document.createElement("div");e.innerHTML=t;var n=e.children[0];return n&&n.parentNode&&n.parentNode.removeChild(n),n}var Ot=n(387);Ot.EventEmitter.prototype.off=Ot.EventEmitter.prototype.removeListener;var Mt,Rt,Lt,It=function(){function t(){this._eventEmitter=new Ot.EventEmitter,this._eventEmitter.setMaxListeners(9999)}return t.prototype.on=function(t,e,n){var r=this;return n?this.once(t,e):(this._eventEmitter&&this._eventEmitter.on(t,e),function(){r.off(t,e,n)})},t.prototype.off=function(t,e,n){this._eventEmitter&&this._eventEmitter.off(t,e)},t.prototype.once=function(t,e){var n=this;return this._eventEmitter&&this._eventEmitter.once(t,e),function(){n.off(t,e)}},t.prototype.emit=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._eventEmitter&&(e=this._eventEmitter).emit.apply(e,x([t],n))},t.prototype.destroy=function(){this._eventEmitter&&(this._eventEmitter.removeAllListeners(),this._eventEmitter=null)},t}();function jt(t){return Mt[t]}function Ft(t){var e=t.split(".").pop()||"";if(e===t)return"";switch(e=e.toLowerCase()){case"json":case"html":case"txt":return"text/plain";case"mp3":case"ogg":case"wav":return"audio/"+e;case"png":case"jpg":case"jpeg":case"bmp":case"gif":case"webp":return"image/"+e;case"mp4":return"video/mp4";case"mov":return"video/quicktime";default:return""}}!function(t){t[t.error=-100]="error",t[t.inited=1]="inited",t[t.bootstrapping=5]="bootstrapping",t[t.bootstrapped=10]="bootstrapped",t[t.pendingRender=12]="pendingRender",t[t.renderingTick=30]="renderingTick",t[t.rendering=34]="rendering",t[t.rendered=38]="rendered",t[t.pendingRunning=50]="pendingRunning",t[t.running=56]="running",t[t.skdStart=70]="skdStart",t[t.compStart=76]="compStart",t[t.finish=90]="finish",t[t.destroyed=100]="destroyed"}(Mt||(Mt={})),function(t){t.noComponentConstructor="NO_COMPONENT_CONSTRUCTOR",t.noComponentInstance="NO_COMPONENT_INSTANCE",t.bootstrapFailed="BOOTSTRAP_FAILED",t.renderFailed="RENDER_FAILED"}(Rt||(Rt={})),function(t){t[t.unknown=0]="unknown",t[t.text=1]="text",t[t.image=2]="image",t[t.audio=3]="audio",t[t.video=4]="video"}(Lt||(Lt={}));var Nt=[Lt[0],Lt[1],Lt[2],Lt[3],Lt[4]];var At=/^(http(s):\/\/|\/)/i;function Vt(t,e){return function(n){return t.push(n),e&&e(n),function(){var e=t.indexOf(n);e>-1&&t.splice(e,1)}}}var Bt=function(){function t(t,e){void 0===e&&(e=!1),this._prepare=!1,this._prepareCalled=!1,this._objectUrl="",this._dataUrl="",this._img=null,this._blob=null,this.url=t,this._prepare=e}return t.prototype.load=function(){var t,e=this;return this._loadPromise||(this._loadPromise=(t=this.url,new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){e(r.response)},r.onerror=function(t){n(t)},r.send()}))).then((function(t){return{arraybuffer:function(){return Promise.resolve(t)},blob:function(){return e.getBlob()},body:function(){return Promise.resolve(t)},dataUrl:function(){return e.getDataUrl()},image:function(){return e.getImage()},json:function(){return e.json()},objectUrl:function(){return e.getObjectUrl()},text:function(){return e.text()}}})),this._loadPromise.then((function(){!e._prepareCalled&&e._prepare&&setTimeout((function(){return e.prepare()}))}))),this._loadPromise},t.prototype.text=function(){return this.getBlob().then((function(t){return function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(t){var n;e(null===(n=t.target)||void 0===n?void 0:n.result)},n.readAsText(t)}))}(t)}))},t.prototype.json=function(){return this.text().then((function(t){return JSON.parse(t)}))},t.prototype.getArrayBuffer=function(){return this.load().then((function(t){return t.body()}))},t.prototype.getBlob=function(){var t=this;return this._blob?Promise.resolve(this._blob):this.getArrayBuffer().then((function(e){var n,r,i;return t._blob=(n=e,r=t.url,i=Ft(r),new Blob([n],{type:i})),t._blob}))},t.prototype.getObjectUrl=function(){var t=this;return this._objectUrl?Promise.resolve(this._objectUrl):this.getBlob().then((function(e){return t._objectUrl=function(t){return(URL||webkitURL).createObjectURL(t)}(e),t._objectUrl}))},t.prototype.getDataUrl=function(){var t=this;return this._dataUrl?Promise.resolve(this._dataUrl):(this._dataUrlPromise||(this._dataUrlPromise=this.getBlob().then((function(t){return function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(){e(n.result)},n.readAsDataURL(t)}))}(t)})).then((function(e){return t._dataUrl=e,e}))),this._dataUrlPromise)},t.prototype.getImage=function(t){var e=this;return void 0===t&&(t="object-url"),this._img?Promise.resolve(this._img):(this._imgPromise||(this._imgPromise=this.getBlob().then((function(){return("file-reader"===t?e.getDataUrl():e.getObjectUrl()).then((function(t){return function(t){var e=new Image;return new Promise((function(n){e.onload=function(){n(e)},e.src=t}))}(t)})).then((function(t){return e._img=t,t}))}))),this._imgPromise)},t.prototype.prepare=function(){var t=this;this._prepareCalled||(this._prepareCalled=!0,this.load().then((function(e){var n,r,i;switch(n=t.url,r=Ft(n),i=Nt.indexOf(r.split("/")[0]),Math.max(0,i)){case Lt.image:e.image();break;case Lt.audio:case Lt.video:e.objectUrl()}})))},t.prototype.destroy=function(){var t;t=this._objectUrl,(URL||webkitURL).revokeObjectURL(t),this._objectUrl="",this._img=null,this._blob=null,this._loadPromise=null,this._imgPromise=null},t}();function Ut(t,e){var n=!1,r=this;return Promise.all(t.map((function(){var t=arguments;return r((function(){if(!n)return e.apply(void 0,t).catch((function(t){throw n=!0,t}))}))})))}function Dt(t){var e=t;return e.queue=0,e.map=Ut,e}function Wt(t){var e,n=0,r=[];function i(){var i;--n<t&&(i=r.shift(),e.queue=r.length,i&&o(i.fn).then(i.resolve).catch(i.reject))}function o(t){n++;try{return Promise.resolve(t()).then((function(t){return i(),t}),(function(t){throw i(),t}))}catch(t){return i(),Promise.reject(t)}}return e=Dt((function(i){return n>=t?function(t){return new Promise((function(n,i){r.push({fn:t,resolve:n,reject:i}),e.queue=r.length}))}(i):o(i)}))}var Ht,zt=function(){function t(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=!1),void 0===n&&(n=8),this._resources={},this._autoPrepare=!1,this._autoPrepare=e,this.add(t),this.limit=function(t){return Dt(t?Wt(t):function(t){return t()})}(n)}return Object.defineProperty(t.prototype,"resList",{get:function(){return Object.keys(this._resources)},enumerable:!1,configurable:!0}),t.prototype.add=function(t){var e=this;return(Array.isArray(t)?t:[t]).forEach((function(t){e._getResource(t)})),this},t.prototype.addAny=function(t){var e,n=(e={},function t(n){if(n){if("string"!=typeof n)return Array.isArray(n)?n.forEach(t):void(n&&Object.keys(n)&&Object.keys(n).forEach((function(e){t(n[e])})));At.test(n)&&(e[n]=!0)}}(t),Object.keys(e));return this.add(n)},t.prototype.preload=function(){var t=this,e=Object.keys(this._resources),n=0,r=[],i=e.length,o=[],s=[],a=Vt(s,(function(t){false}));var c=Vt(o),u=Promise.all(e.map((function(e){var a=t.load(e);return a.then((function(){n+=1,Promise.resolve().then((function(){return function(){n===i&&s.forEach((function(t){return t(r)}));var t=Number((n/i).toFixed(4));o.forEach((function(e){return e(t,n,i)}))}()}))})),a})));return u.onFinish=a,u.onProgress=c,u.then((function(t){r=t})),u},t.prototype.load=function(t){var e=this;return this.limit((function(){return e._getResource(t).load()}))},t.prototype.loadImage=function(t){return this.load(t).then((function(t){return t.image()}))},t.prototype.loadText=function(t){return this.load(t).then((function(t){return t.text()}))},t.prototype.loadJson=function(t){return this.load(t).then((function(t){return t.json()}))},t.prototype.loadArrayBuffer=function(t){return this.load(t).then((function(t){return t.arraybuffer()}))},t.prototype.loadBlob=function(t){return this.load(t).then((function(t){return t.blob()}))},t.prototype.loadObjectUrl=function(t){return this.load(t).then((function(t){return t.objectUrl()}))},t.prototype.autoDetect=function(t){return this.addAny(t)},t.prototype.reset=function(){var t=this;Object.keys(this._resources).forEach((function(e){t._resources[e].destroy()})),this._resources={}},t.prototype.destroy=function(){this.reset()},t.prototype._getResource=function(t){if(this._resources[t])return this._resources[t];var e=new Bt(t,this._autoPrepare);return this._resources[t]=e,e},t.shared=new t([],!0),t}();!function(t){t.loadResourceStart="LOAD_RESOURCE_START",t.loadResourceFinish="LOAD_RESOURCE_FINISH",t.renderStart="RENDER_START",t.renderFinish="RENDER_FINISH",t.enterSection="ENTER_SECTION",t.playStart="PLAY_START",t.playFinish="PLAY_FINISH",t.clickArea="CLICK_AREA",t.destroy="DESTROY"}(Ht||(Ht={}));var Gt="play-comp-do-not-trigger-sdk-start",qt="RENDER_SIGNAL",Yt="_mute_line_el";var Xt,Kt=function(){function t(t){this._mute=!1,this._ready=!1,this._forceMute=!0,this._tapEventProxyCanceller=tt,this.options=t,this.controlElement=document.createElement("div"),this.innerElement=document.createElement("div"),this._toggleIsMute=this._toggleIsMute.bind(this),this.hasAudio=Boolean(this.component.hasAudio),this.muteIcon=function(t){void 0===t&&(t=!1);var e=document.createElement("div");e.innerHTML='<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14 28C21.732 28 28 21.732 28 14C28 6.26801 21.732 0 14 0C6.26801 0 0 6.26801 0 14C0 21.732 6.26801 28 14 28Z" fill="#161823" fill-opacity="0.4"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15 7V21C11.5 21 8.89926 17.4374 8.89926 17.4374H6C5.44772 17.4374 5 16.9897 5 16.4374V11.5042C5 10.9519 5.44772 10.5042 6 10.5042H8.89926C8.89926 10.5042 11.5 7 15 7Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n<line x1="22" y1="6.06066" class="_mute_line_el" x2="6.06066" y2="22" style="transition: all ease .3s" stroke="white" stroke-width="1.5" stroke-linecap="round"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.5454 12.5968C17.6559 12.6857 17.755 12.7839 17.8416 12.8892C18.1033 13.2077 18.25 13.5913 18.25 14C18.25 14.4053 18.1058 14.7857 17.8484 15.1025C17.7572 15.2147 17.6518 15.3189 17.5338 15.4126C17.2093 15.6701 17.1551 16.1419 17.4126 16.4663C17.6701 16.7907 18.1419 16.845 18.4663 16.5875C18.6678 16.4276 18.8512 16.247 19.0126 16.0484C19.4711 15.484 19.75 14.7745 19.75 14C19.75 13.2187 19.4661 12.5036 19.0005 11.937C18.8815 11.7921 18.7507 11.6569 18.6096 11.5325L17.5454 12.5968ZM20.5404 9.60176C20.7874 9.85574 21.0137 10.1379 21.2153 10.4446C21.8613 11.4273 22.25 12.6571 22.25 14C22.25 15.3313 21.868 16.5514 21.232 17.5298C21.0079 17.8747 20.7525 18.189 20.4718 18.4676C20.1777 18.7593 20.1758 19.2342 20.4676 19.5282C20.7593 19.8223 21.2342 19.8242 21.5282 19.5324C21.8866 19.1769 22.209 18.7792 22.4897 18.3472C23.2856 17.1228 23.75 15.6182 23.75 14C23.75 12.3677 23.2774 10.8509 22.4688 9.6207C22.2123 9.23047 21.9216 8.86864 21.6011 8.54102L20.5404 9.60176Z" fill="white"/>\n</svg>\n';var n=e.querySelector("."+Yt);function r(t){Ct(n,t?{strokeWidth:"1.5"}:{strokeWidth:"0"})}return r(t),{icon:e.children[0],setMute:r}}(),this.innerElement.appendChild(this.muteIcon.icon),this.hasAudio&&this._init()}return Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},set:function(t){this._ready=t,this.updateMute()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mute",{get:function(){return this._mute},set:function(t){this._mute=t,this.updateMute()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forceMute",{get:function(){return this._forceMute},set:function(t){this._forceMute=t,this.updateMute()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMute",{get:function(){return!this.ready||this.forceMute||this.mute},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.options.component},enumerable:!1,configurable:!0}),t.prototype.updateMute=function(){this.setMute(this.isMute),this._updateStyle()},t.prototype.setMute=function(t){this.hasAudio&&(this.component.setMute?this.component.setMute(t):R.warn("[AudioControlService]: 组件未实现setMute(mute: boolean) 方法，音频无法控制"))},t.prototype.mountControl=function(){this.options.container.appendChild(this.controlElement)},t.prototype.destroy=function(){this.controlElement&&this.controlElement.parentNode&&this.controlElement.parentNode.removeChild(this.controlElement),this.controlElement.removeEventListener("tap",this._toggleIsMute),this._tapEventProxyCanceller()},t.prototype._updateStyle=function(){this.muteIcon.setMute(this.isMute)},t.prototype._toggleIsMute=function(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()),this.mute=!this.isMute},t.prototype._init=function(){this._appendControl(),this._mute=this.options.defaultMute,this.updateMute(),this._tapEventProxyCanceller=Tt(this.controlElement),this.controlElement.addEventListener("taptap",this._toggleIsMute)},t.prototype._appendControl=function(){var t=this.controlElement;t.setAttribute(Gt,"");var e=this.innerElement;Ct(t,{width:"36px",height:"36px",position:"absolute",top:"0",left:"0"}),Ct(e,{width:"24px",height:"24px",position:"absolute",top:"6px",left:"6px",backgroundSize:"cover"}),Ct(this.muteIcon.icon,{width:"100%",height:"100%"}),t.appendChild(e)},t}(),Zt=n(375),Jt=n.n(Zt),$t=n(384),Qt=n.n($t);!function(t){t.sdkStartPlayable="SDK_START_PLAYABLE",t.uncaughtError="UNCAUGHT_ERROR",t.renderError="COMP_RENDER_ERROR",t.resourceLoadError="COMP_RES_LOAD_ERROR"}(Xt||(Xt={}));var te,ee={clientX:0,clientY:0,time:(new Date).getTime()},ne=function(){function t(t){var e=this;this._resourcePromiseTimer=null,this._resourcePromiseTimerResolver=tt,this._renderPromiseTimer=null,this._renderPromiseTimerResolver=tt,this._touchPayload=[b({},ee),b({},ee)],this._renderStartPayload={},this._renderFinishPayload={},this._renderStartFired=!1,this._renderFinishFired=!1,this._trackedSdkStart=!1,this.handlePointer=function(t){var n=["touchstart","mousedown"].includes(t.type)?0:1;if("touchstart"===t.type||"touchend"===t.type){var r=t.changedTouches[0];e._touchPayload[n]={clientY:r.clientX,clientX:r.clientX,time:(new Date).getTime()}}else{var i=t;e._touchPayload[n]={clientX:i.clientX,clientY:i.clientY,time:(new Date).getTime()}}},this.options=t,this.trackLifecycle=this.trackLifecycle.bind(this),this.reportFirstInteraction=this.reportFirstInteraction.bind(this),this.proxyClickTrackPointer(),this.handleRenderStart=Jt()(this.handleRenderStart,200),this.handleRenderFinish=Jt()(this.handleRenderFinish,200)}return Object.defineProperty(t.prototype,"clickInfo",{get:function(){var t=this._touchPayload,e=t[0],n=t[1];return{up_x:n.clientX,up_y:n.clientY,up_time:n.time,down_x:e.clientX,down_y:e.clientY,down_time:e.time}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.options.pointerTrackContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.options.context},enumerable:!1,configurable:!0}),t.prototype.reportFirstInteraction=function(t){var e=null==t?void 0:t.target;e&&Pt(e,Gt,this.container||document.body)||this._trackedSdkStart||(this._trackedSdkStart=!0,this.sendTrack(Xt.sdkStartPlayable),this.context.status<=Mt.skdStart&&this.options.context._setStatus(Mt.skdStart),this.clearProxyFirstUserInteraction())},t.prototype.proxyFirstUserInteraction=function(){var t=this;_t.forEach((function(e){t.container.addEventListener(e,t.reportFirstInteraction)}))},t.prototype.clearProxyFirstUserInteraction=function(){var t=this;_t.forEach((function(e){t.container.removeEventListener(e,t.reportFirstInteraction)}))},t.prototype.proxyClickTrackPointer=function(){var t=this;bt.concat(wt).forEach((function(e){t.container.addEventListener(e,t.handlePointer)}))},t.prototype.clearPointerProxy=function(){var t=this;bt.concat(wt).forEach((function(e){t.container.removeEventListener(e,t.handlePointer)}))},t.prototype.sendTrack=function(t,e){console.log(t,e)},t.prototype.trackLifecycle=function(t,e){var n=this,r={name:"",payload:{}};"string"==typeof t?(r.name=t,r.payload=e||{},Qt()(r.payload)||(r.payload={_raw_form_component_payload:r.payload})):Object.assign(r,t);var i=r.name,o=r.payload;switch(i){case Ht.clickArea:var s=o;s.clickInfo=this.clickInfo,s.convert_type=Number(Boolean(null==s?void 0:s.isConvert)),this.sendTrack(Ht.clickArea,s);break;case Ht.loadResourceStart:this.sendTrack(Ht.loadResourceStart,o),this._resourcePromiseTimer=A(new Promise((function(t){n._resourcePromiseTimerResolver=t})));break;case Ht.loadResourceFinish:this._resourcePromiseTimerResolver(),this.handleResourceFinish(o);break;case Ht.renderStart:this._renderPromiseTimer=this._renderPromiseTimer||A(new Promise((function(t){n._renderPromiseTimerResolver=t}))),this._renderStartPayload=b(b({},this._renderStartPayload),o),this.handleRenderStart();break;case Ht.renderFinish:this._renderPromiseTimerResolver(),this._renderFinishPayload=b(b({},this._renderFinishPayload),o),this.handleRenderFinish();break;case Ht.playStart:this.reportFirstInteraction(),this.sendTrack(Ht.playStart,o),this.options.context._setStatus(Mt.compStart);break;case Ht.playFinish:this.sendTrack(Ht.playFinish,o),this.options.context._setStatus(Mt.finish)}},t.prototype.handleResourceFinish=function(t){var e,n;return _(this,void 0,void 0,(function(){var r,i,o;return w(this,(function(s){switch(s.label){case 0:return this._resourcePromiseTimer?[4,this._resourcePromiseTimer]:(r=Ht.loadResourceFinish,i=Ht.loadResourceStart,this.sendTrack(Xt.uncaughtError,{reason:"Wrong lifecycle emits order, lifecycle ["+r+"] triggers before ["+i+"]"}),[2]);case 1:return s.sent(),o=null!==(n=null===(e=this._resourcePromiseTimer)||void 0===e?void 0:e.duration)&&void 0!==n?n:-1,this.sendTrack(Ht.loadResourceFinish,b(b({},t),{load_resource_duration:o})),[2]}}))}))},t.prototype.handleRenderStart=function(){return _(this,void 0,void 0,(function(){return w(this,(function(t){return this._renderStartFired?this.sendTrack(Xt.uncaughtError,{reason:Ht.renderStart+" has emitted before, latest payload reported",renderStartPayload:this._renderStartPayload}):(this._renderStartFired=!0,this.sendTrack(Ht.renderStart,this._renderStartPayload)),[2]}))}))},t.prototype.handleRenderFinish=function(){var t,e;return _(this,void 0,void 0,(function(){var n,r,i;return w(this,(function(o){switch(o.label){case 0:return this._renderPromiseTimer?[4,this._renderPromiseTimer]:(n=Ht.renderFinish,r=Ht.renderStart,this.sendTrack(Xt.uncaughtError,{reason:"Wrong lifecycle emits order, lifecycle ["+n+"] triggers before ["+r+"]"}),[2]);case 1:return o.sent(),this._renderFinishFired?(this.sendTrack(Xt.uncaughtError,{reason:Ht.renderFinish+" has emitted before, latest payload reported",renderFinishPayload:this._renderFinishPayload}),[2]):(this._renderFinishFired=!0,i=null!==(e=null===(t=this._renderPromiseTimer)||void 0===t?void 0:t.duration)&&void 0!==e?e:-1,this.sendTrack(Ht.renderFinish,b(b({},this._renderFinishPayload),{render_duration:i})),[2])}}))}))},t.prototype.destroy=function(){this.clearPointerProxy(),this.clearProxyFirstUserInteraction()},t}(),re=function(t){function e(e){var n,r=t.call(this)||this;return r._status=Mt.inited,r._errorCode=null,r._subscriptions=[],r._renderSignal=!1,r._singleCallMethods={},r.performance={js_load_time:0,instance_construct_time:0,load_resource_time:0,wait_render_signal_time:0,wait_ad_show_time:0},r.nodeClassName=nt("play-comp-wrapper-"),r.perfTimeFn=function(){return 0},r.waitingTimeFn=function(){return 0},r.proxySubscribe=function(t,e,n){var i=r.options.subscribe(t,e,n);r._subscriptions.push(i);var o=function(){var t=r._subscriptions.indexOf(o);-1!==t&&r._subscriptions.splice(t,1),i()};return o},r.options=Object.assign({},e),r.perfTimeFn=(null===(n=r.options)||void 0===n?void 0:n.perfTimeFn)||N(),r.beforeInit(),r.init(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loader",{get:function(){return this.options.loader?this.options.loader:(this._loader||(this._loader=this.getLoader()),this._loader)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVideo",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"abilities",{get:function(){return b(b({},this.options.abilities),{track:this.trackService.trackLifecycle})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentOptions",{get:function(){return{container:this.componentContainer,loader:this.loader,config:this.options.config||{},abilities:this.abilities,subscribe:this.proxySubscribe}},enumerable:!1,configurable:!0}),e.prototype.beforeInit=function(){this.assertMethod("beforeInit")},e.prototype.init=function(){this.assertMethod("init"),this.createElements(),this.initTrackService(),this.createComponent(),this.initAudioControlService()},e.prototype.createElements=function(){var t;this.assertMethod("createElements");var e=this.options.component,n=e.size,r=e.containerType,i=this.options,o=i.container,s=i.containerSize,a=n.width/n.height;this.node=document.createElement("div"),this.innerContainer=document.createElement("div");var c=this.node,u=this.innerContainer;c.setAttribute("data-container","top-container"),c.className=this.nodeClassName,Ct(c,{width:s.width+"px",height:s.height+"px",position:"relative",boxSizing:"border-box"}),u.setAttribute("data-container","inner-container"),Ct(u,((t={position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",margin:"auto",boxSizing:"border-box"})["-webkit-tap-highlight-color"]="transparent",t));var l=s.height*a,p=s.width/a,d=[0,0];if(Ct(u,{width:(d=l<=s.width?[l,s.height]:[s.width,p])[0]+"px",height:d[1]+"px"}),"canvas"===r){this.componentContainer=document.createElement("canvas");var h=this.componentContainer;Ct(h,{width:d[0]+"px",height:d[1]+"px"}),u.appendChild(h)}else this.componentContainer=u;c.appendChild(u),o.appendChild(c)},e.prototype.createComponent=function(){var t=this;this.assertMethod("createComponent");var e=this.options.component;if(!e||!rt(e))throw this._setStatus(Mt.error),this._setErrorCode(Rt.noComponentConstructor),setTimeout((function(){return t.destroy()})),new Error("[LightPlay]: Component is not ready yet, type is: "+typeof e);try{this.component=new e(this.componentOptions)}catch(e){throw R.error(e),setTimeout((function(){return t.destroy()})),e}},e.prototype.getLoader=function(){return new zt([])},e.prototype.initTrackService=function(){this.trackService=new ne({context:this,pointerTrackContainer:this.innerContainer})},e.prototype.initAudioControlService=function(){var t=this.options.defaultMuted,e=void 0===t||t;this.audioControlService=new Kt({component:this.component,container:this.innerContainer,defaultMute:e})},e.prototype.deactivateElement=function(){Ct(this.node,{pointerEvents:"none",position:"absolute"})},e.prototype.hideElement=function(){Ct(this.node,{opacity:"0"})},e.prototype.showElement=function(){Ct(this.node,{opacity:"1"})},e.prototype.activeElement=function(){Ct(this.node,{pointerEvents:"all",position:"relative"})},e.prototype.assertMethod=function(t){if(this._singleCallMethods[t])throw new Error("[PlayCompSDK]: method #"+t+" can only be called once, multiple calls detected.");this._singleCallMethods[t]=!0},e.prototype.assertComp=function(){if(!this.component)throw this._setStatus(Mt.error),this._setErrorCode(Rt.noComponentInstance),new Error("[PlayCompSDK]: component instance is not ready, lifecycle call failed")},e.prototype.autoRender=function(){return _(this,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:try{this.assertComp()}catch(t){throw t}return this.assertMethod("autoRender"),[4,this.bootstrap()];case 1:return t.sent(),this._setStatus(Mt.pendingRender),this.waitingTimeFn=N(),[4,this.onRenderSignal()];case 2:return t.sent(),this.performance.wait_render_signal_time=this.waitingTimeFn(),[4,this.renderStart()];case 3:return t.sent(),[2]}}))}))},e.prototype.bootstrap=function(){var t,e;return _(this,void 0,void 0,(function(){var n,r;return w(this,(function(i){switch(i.label){case 0:this.assertMethod("bootstrap"),this.assertComp(),n=A(this.component.bootstrap()),i.label=1;case 1:return i.trys.push([1,3,,4]),this._setStatus(Mt.bootstrapping),[4,n];case 2:return i.sent(),this.performance.load_resource_time=n.duration,this._setStatus(Mt.bootstrapped),[3,4];case 3:throw r=i.sent(),this.trackService.sendTrack(Xt.resourceLoadError,{reason:null!==(t=null==r?void 0:r.message)&&void 0!==t?t:"",error_list:[null!==(e=null==r?void 0:r.message)&&void 0!==e?e:""]}),this._setErrorCode(Rt.bootstrapFailed),r;case 4:return[2,n]}}))}))},e.prototype.renderStart=function(){return _(this,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return this.assertMethod("renderStart"),[4,this.render()];case 1:return t.sent(),this.isVideo||this.start(),[2]}}))}))},e.prototype.render=function(){var t;return _(this,void 0,void 0,(function(){var e,n;return w(this,(function(r){switch(r.label){case 0:this.assertMethod("render"),this.assertComp(),this.trackService.trackLifecycle({name:Ht.renderStart}),this._setStatus(Mt.renderingTick),e=A(this.component.render()),r.label=1;case 1:return r.trys.push([1,3,,4]),this._setStatus(Mt.rendering),[4,e];case 2:return r.sent(),this.trackService.trackLifecycle({name:Ht.renderFinish,payload:b(b({},this.performance),{play_comp_duration:this.perfTimeFn()-this.performance.wait_render_signal_time})}),this._setStatus(Mt.rendered),this.trackService.proxyFirstUserInteraction(),[3,4];case 3:throw n=r.sent(),this.trackService.sendTrack(Xt.renderError,{reason:null!==(t=null==n?void 0:n.message)&&void 0!==t?t:""}),this._setErrorCode(Rt.renderFailed),n;case 4:return this._setStatus(Mt.pendingRunning),[2,e]}}))}))},e.prototype.start=function(){return _(this,void 0,void 0,(function(){var t=this;return w(this,(function(e){switch(e.label){case 0:return this.status>=Mt.running?[2]:this.status<Mt.pendingRunning?[4,new Promise((function(e){var n=t.on("onStatusChange",(function(t){t===Mt.pendingRunning&&(e(void 0),n())}))}))]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.status!==Mt.pendingRunning||(this.component.start&&this.component.start(),this._setStatus(Mt.running)),[2]}}))}))},e.prototype.restart=function(t){return _(this,void 0,void 0,(function(){return w(this,(function(e){return this.assertComp(),[2,this.component.restart(t).then((function(){}))]}))}))},e.prototype.update=function(t){return _(this,void 0,void 0,(function(){return w(this,(function(e){return this.assertComp(),[2,this.component.update(t)]}))}))},e.prototype.emitRenderSignal=function(){this._renderSignal=!0,this.emit(qt)},e.prototype.onRenderSignal=function(t){var e=this,n=function(){if(!t)return Promise.resolve();t()};if(this._renderSignal)return n();var r=new Promise((function(t){e.once(qt,(function(){t(),n()}))}));return t?void 0:r},e.prototype.onRendered=function(t){return this.onStatus(Mt.pendingRunning,t)},e.prototype.onStatus=function(t,e){var n=this;if(this.status>=t)return function(){if(!e)return Promise.resolve();e()}();var r=new Promise((function(r){var i=n.on("onStatusChange",(function(n){n>=t&&(r(),i(),e&&e())}))}));return e?void 0:r},e.prototype.destroy=function(){return _(this,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return this.component?[4,this.component.destroy()]:[3,2];case 1:e.sent(),e.label=2;case 2:try{this._subscriptions.forEach((function(t){return t()})),this._subscriptions=[],this.trackService&&this.trackService.destroy(),this.audioControlService&&this.audioControlService.destroy(),this.node.parentNode&&this.node.parentNode.removeChild(this.node)}catch(t){R.error(t)}return this._setStatus(Mt.destroyed),t.prototype.destroy.call(this),[2]}}))}))},e.prototype._setStatus=function(t){t<this._status&&t!==Mt.error?R.warn("Invalid status update detected, current status: "+this._status+" ("+jt(this._status)+"), but incoming status: "+t+" ("+jt(t)+")"):(this._status=t,this.emit("onStatusChange",t))},e.prototype._setErrorCode=function(t){this._errorCode=t,this.emit("onStatusChange",Mt.error)},e}(It);function ie(t,e){return e}function oe(t){var e={loadResource:1200,loadScript:1e3,renderComponent:300};return"number"==typeof t?(e.loadResource=t,e.loadScript=t,e.renderComponent=t):Object.keys(t||{}).forEach((function(n){var r=Number(null==t?void 0:t[n]);n in e&&"number"==typeof r&&(e[n]=r)})),e}var se=((te={})[Xt.renderError]="mnpl_material_render_error",te[Xt.resourceLoadError]="mnpl_resource_load_error",te[Xt.sdkStartPlayable]="sdk_start_playable",te[Xt.uncaughtError]="light_play_uncaught_error",te[Ht.clickArea]="clickarea",te[Ht.loadResourceFinish]="mnpl_resource_finish_load",te[Ht.loadResourceStart]="mnpl_resource_start_load",te[Ht.playFinish]="custom_finish_playable",te[Ht.playStart]="custom_start_playable",te[Ht.renderFinish]="mnpl_material_finish_render",te[Ht.renderStart]="mnpl_material_start_render",te),ae=function(t){function e(e){var n=t.call(this,e)||this;return n.options=e,n}return a(e,t),e.prototype.sendTrack=function(t,e){var n=this;void 0===e&&(e={});var r=[],i=oe(this.options.timeout);switch(t){case Ht.clickArea:var o=ie(Ht.clickArea,e);o.convert_type=Number(Boolean(o.isConvert)),o.isConvert&&this.options.trackClick(o);break;case Ht.loadResourceFinish:var s=ie(Ht.loadResourceFinish,e);s.load_resource_duration>i.loadResource&&r.push(["mnpl_resource_load_timeout",{load_resource_duration:s.load_resource_duration,load_resource_timeout:i.loadResource}]);break;case Ht.renderFinish:var a=ie(Ht.renderFinish,e);a.light_play_duration=a.play_comp_duration,a.render_duration>i.renderComponent&&r.push(["mnpl_material_render_timeout",{render_material_duration:a.render_duration,render_material_timeout:i.renderComponent}])}r.unshift([se[t]||t,e||{}]),r.forEach((function(t){n.options.track(t[0],t[1]||{})}))},e}(ne),ce={inView:!1,adVisible:!1,adVisibleOnce:!1,expressShowed:!1,_afterExpressTimeFn:function(){}};var ue="undefined"==typeof window;function le(){var t=navigator.userAgent.match(/Android [\d+\.]{2,5}/);return t?t[0].replace("Android ","").split(".").map((function(t){return parseInt(t,10)})):[]}Boolean(function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)||[];return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||"0",10)]}return[]}().length),Boolean(le().length);var pe=!ue&&"ontouchstart"in window,de=pe?["touchstart"]:["mousedown"];p(de,["click"]);function he(){var t=document.body,e=t.clientHeight,n=t.clientWidth,r=window.devicePixelRatio||1;n+"x"+e+"@"+r+"x"}ue||(dt()(he),window.addEventListener("resize",he));var fe={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"};if("undefined"!=typeof document)for(var ve=document.createElement("div").style,me=Object.keys(fe),ge=0,ye=me[ge];ge<me.length;ye=me[ge+=1])if(ye in ve){fe[ye];break}function be(t,e){Object.keys(e).forEach((function(n){var r=e[n];t.style[n]=r}))}var _e=function(){function t(t){this.scope="_v"+Math.random().toString(16).substr(2,6),this.frame="_frame_"+Math.random().toString(16).substr(2,6),this.innerCls=this.scope+"_inner",this.textCls=this.scope+"_text",this.imgCls=this.scope+"_img",this._isFold=!1,this._text="",this.render(),this.text=(null==t?void 0:t.text)||"点击互动"}return Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this._textEl&&(this._textEl.innerText=t)},enumerable:!1,configurable:!0}),t.prototype.fold=function(){var t=this;this._isFold=!0,this.el&&this._updateInnerWidth().then((function(){var e;null===(e=t.el)||void 0===e||e.classList.add("fold")}))},t.prototype.unfold=function(){this._isFold=!1,this.el&&this.el.classList.remove("fold"),this._resetInnerWidth()},t.prototype.mount=function(t){this.el&&t.appendChild(this.el)},t.prototype.render=function(){this.el=document.createElement("div"),this.el.setAttribute(this.scope,""),this.el.className="",this.el.id=this.scope,this.el.innerHTML='\n    <style></style>\n    <div class="'+this.innerCls+'">\n      <img class="'+this.imgCls+'" src="https://sf3-fe-tos.pglstatp-toutiao.com/obj/goofy/ad/light-play-sdk/feat/use-sdk-core/assets/icon/playable-3x.png" />\n      <div class="'+this.textCls+'"></div>\n    </div>',this._img=this.el.querySelector("img"),this._style=this.el.querySelector("style"),this._textEl=this.el.querySelector("."+this.textCls),this._inner=this.el.querySelector("."+this.innerCls),this._makeStyles()},t.prototype.forceUpdate=function(){this._makeStyles()},t.prototype.destroy=function(){this.el&&(this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el.innerHTML="",this._img=null,this._inner=null,this._style=null,this._textEl=null)},t.prototype._resetInnerWidth=function(){this._inner&&this.el&&(this._isFold||(be(this.el,{width:""}),be(this._inner,{width:""})))},t.prototype._updateInnerWidth=function(){var t=this;return new Promise((function(e){if(t._inner&&t.el){var n=getComputedStyle(t._inner).width;be(t._inner,{width:n}),be(t.el,{width:n}),dt()((function(){dt()((function(){e()}))}))}else e()}))},t.prototype._makeStyles=function(){var t=function(t,e){var n;if(Array.isArray(e)){var r=e[0],i=e[1];n={from:r,to:i}}else n=e;var o=Object.keys(n).reduce((function(t,e){var r=e;Number(r)<1&&(r=100*Number(r)+"%");var i=n[e];return t+(r+" {\n  ")+Object.keys(i).reduce((function(t,e){return""+t+e+": "+i[e]+";\n"}),"")+" }\n"}),"");return["-webkit-","-moz-","-o-",""].reduce((function(e,n){return e+"@"+n+"keyframes "+t+" {\n "+o+" }\n"}),"")}(this.frame,{"0%, 100%":{transform:"rotate(0deg)"},"20%, 60%":{transform:"rotate(-15deg)"},"40%, 80%":{transform:"rotate(15deg)"}}),e=Math.min(100,100*document.body.clientWidth/750),n="\n      "+t+"\n\n      #"+this.scope+"["+this.scope+"] {\n        background: rgba(0, 0, 0, .5);\n        transition: all cubic-bezier(0.25, 0.1, 0.25, 1) 300ms;\n        -webkit-transition: all cubic-bezier(0.25, 0.1, 0.25, 1) 300ms;\n        border-radius: 0.24em;\n        height: 0.48em;\n        pointer-events: none ;\n        font-size: "+e+"px;\n      }\n\n      #"+this.scope+"["+this.scope+"] ."+this.innerCls+" {\n        height: 100%;\n        padding: 0 0.16em 0 0.08em;\n        display: flex;\n        align-items: center;\n        font-size: "+e+"px;\n      }\n\n      #"+this.scope+"["+this.scope+"], #"+this.scope+"["+this.scope+"] * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      #"+this.scope+"["+this.scope+"] img."+this.imgCls+" {\n        transition: all cubic-bezier(0, 0, .58, 1) .3s;\n        -webkit-transition: all cubic-bezier(0, 0, .58, 1) .3s;\n        animation: "+this.frame+" 500ms cubic-bezier(0.25, 0.1, 0.25, 1);\n        -webkit-animation: "+this.frame+" 500ms cubic-bezier(0.25, 0.1, 0.25, 1);\n        animation-play-state: paused;\n        -webkit-animation-play-state: paused;\n        animation-iteration-count: 1;\n        -webkit-animation-iteration-count: 1;\n        height: 0.32em;\n        width: 0.32em;\n        margin-right: 0.04em;\n      }\n\n\n      #"+this.scope+"["+this.scope+"] ."+this.textCls+" {\n        color: #ffffff;\n        transition: all cubic-bezier(0, 0, .58, 1) .3s;\n        -webkit-transition: all cubic-bezier(0, 0, .58, 1) .3s;\n        line-height: 1em;\n        height: 1em;\n        font-size: 0.24em;\n        font-weight: 500;\n      }\n\n      #"+this.scope+"["+this.scope+"].fold {\n        background: rgba(0, 0, 0, .12);\n        overflow: hidden;\n        width: 0.48em !important;\n      }\n\n      #"+this.scope+"["+this.scope+"].fold,\n      #"+this.scope+"["+this.scope+"].fold img."+this.imgCls+",\n      #"+this.scope+"["+this.scope+"].fold ."+this.textCls+" {\n        transition-delay: 1.5s;\n        -webkit-transition-delay: 1.5s;\n      }\n\n      #"+this.scope+"["+this.scope+"].fold img {\n        opacity: .5;\n\n        animation-play-state: running;\n        -webkit-animation-play-state: running;\n      }\n\n      #"+this.scope+"["+this.scope+"].fold ."+this.textCls+" {\n        opacity: 0;\n      }\n    ";this._style&&(this._style.innerHTML=n)},t}();o.logger.setTag("LightPlaySDK");var we,xe=function(t){function e(e){var n=t.call(this,e)||this;return n._isForceFinish=!1,n._shouldShow=!0,n._inViewSubscription=o.noop,n.options=n.options,n}return a(e,t),Object.defineProperty(e.prototype,"isVideo",{get:function(){return Boolean(this.options.videoControl)},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this.prepareRenderSignal(),this.handleAudio(),this.isVideo?this.prepareVideo():this.addPlayIcon()},e.prototype.handleAudio=function(){var t=this;this.audioControlService.forceMute=!qe.inView,this._inViewSubscription=this.proxySubscribe(g.a.inViewChange,(function(e){t.audioControlService.forceMute=!e})),this.onRendered().then((function(){t.audioControlService.hasAudio&&(t.audioControlService.ready=!0,t.isVideo||t.audioControlService.mountControl())}))},e.prototype.prepareRenderSignal=function(){return u(this,void 0,void 0,(function(){var t,e=this;return l(this,(function(n){switch(n.label){case 0:return[4,this.onStatus(Mt.bootstrapped)];case 1:return n.sent(),t=this.instantDoRender?"instant":"waiting_ad_show",this.trackService.sendTrack("mnpl_render_timing",{timing:t,mode:this.renderTiming}),this.instantDoRender?(this.emitRenderSignal(),[3,4]):[3,2];case 2:return[4,new Promise((function(t,n){var r,o,s=e.renderTiming===d.expressShow?g.a.expressShow:g.a.inViewChange,a=function(){return u(e,void 0,void 0,(function(){return l(this,(function(e){return r&&r(),o&&o.cancel(),t(),[2]}))}))};o=i.waitWebglSupport(),r=e.proxySubscribe(s,(function(t){try{t&&a()}catch(t){n(t)}})),o.then((function(){a()}))}))];case 3:n.sent(),console.log("release"),this.emitRenderSignal(),n.label=4;case 4:return[2]}}))}))},e.prototype.initTrackService=function(){this.trackService=new ae({track:this.options.abilities.track,trackClick:this.options.abilities.trackClick,context:this,pointerTrackContainer:this.innerContainer,timeout:this.options.timeout})},Object.defineProperty(e.prototype,"renderTiming",{get:function(){var t=this.options.renderTiming,e=void 0===t?d.expressShow:t;return o.isIOS?d.legacy:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instantDoRender",{get:function(){if(o.isIOS)return!0;switch(this.renderTiming){case d.expressShow:return qe.expressShow;case d.legacy:return ce.inView;default:return!1}},enumerable:!1,configurable:!0}),e.prototype.addPlayIcon=function(){var t,e,n=this;if(this.options.playIcon){var r="";"string"==typeof this.options.playIcon&&(r=this.options.playIcon),this.playIcon=new _e({text:r}),(null===(t=this.playIcon)||void 0===t?void 0:t.el)&&o.applyStyle(null===(e=this.playIcon)||void 0===e?void 0:e.el,{position:"absolute",bottom:"6px",left:"6px"}),this.onStatus(Mt.rendered).then((function(){n.playIcon&&n.playIcon.mount(n.innerContainer)})),this.onStatus(Mt.skdStart).then((function(){n.playIcon&&n.playIcon.fold()})),this.proxySubscribe(g.a.expressShow,(function(){n.playIcon&&n.playIcon.forceUpdate()}),!0)}},e.prototype.prepareRgbDetect=function(){var t=this,e=this.options.plainRgbDetect;if(e){var n={rate:.1,maxRetry:2};if(e>0)n.rate=Math.min(1,Math.max(0,e));else{var s=e;n.rate=Math.min(1,Math.max(0,s.rate)),n.maxRetry=Math.min(4,Math.max(2,s.maxRetry||0))}var a=Math.random(),c=a<n.rate;this.trackService.sendTrack("mnpl_rgb_should_detect_debug",{rate:n.rate,random_result:a,max_retry:n.maxRetry,should_detect:c}),c&&(this.onStatus(Mt.renderingTick,(function(){r.hackWebglCanvas()})),this.onStatus(Mt.rendered).then((function(){r.resumeWebglContext()})),this.onStatus(Mt.running).then((function(){return u(t,void 0,void 0,(function(){var t=this;return l(this,(function(e){switch(e.label){case 0:return[4,o.wait(300)];case 1:return e.sent(),i.rgbDetect({maxRetry:n.maxRetry,input:function(){return t.innerContainer.querySelector("canvas")},retryInterval:500,component:this.component}).then((function(e){var n;t.trackService.sendTrack("mnpl_rgb_detect_debug",{is_plain_rgb:e.isPlain,retry_count:e.retryCount,extra:e.extra}),e.isPlain&&t.trackService.sendTrack("mnpl_plain_rgb_detected",{color:null===(n=e.rgbaArray[0])||void 0===n?void 0:n.color,retry_count:e.retryCount,rgbaArray:e.rgbaArray,extra:e.extra})})).catch((function(e){t.trackService.sendTrack("mnpl_rgb_detect_error",{reason:(null==e?void 0:e.reason)||(null==e?void 0:e.message)||"unknown"})})),[2]}}))}))})))}},e.prototype.prepareVideo=function(){var t=this;if(this.options.videoControl){var e=this.options.videoControl,n=e.time,r=e.pauseVideo,i=e.safePlayContinue,s=void 0===i||i,a=e.forceRenderEvenOverTiming,c=void 0!==a&&a;this.hideElement(),this.deactivateElement();var p=function(t){var e={pauseVideoTime:0,visibleTime:0,activeTime:0};if("number"==typeof t)e.visibleTime=t,e.activeTime=t,e.pauseVideoTime=t;else{var n=t.activeTime,r=t.pauseVideoTime,i=void 0===r?n:r,o=t.visibleTime,s=void 0===o?n:o;e.visibleTime=s,e.activeTime=n,e.pauseVideoTime=i}return e}(n),d=p.visibleTime,h=p.activeTime,v=p.pauseVideoTime,m=!1,y=!1,b=!1,_=Math.max(d,h,v);r||(_=Math.max(d,h)),this.handleVideoException(),this.proxySubscribe(g.a.videoStateChange,(function(e){var n=e.muted;t.audioControlService.mute=n}));var w,x={pauseVideo:0,active:0,visible:0,pauseTrigger:0,forcePlayableVisible:!1},C=[],S=this.proxySubscribe(g.a.videoStateChange,(function(e){if(w=e,e.state===f.PLAY){var n=1e3*e.currentTime;if(n>=d&&!m){m=!0;var i=o.createTimer(t.onRendered());C.push(i),i.then((function(){t._shouldShow&&o.fade(t.node,"in").then((function(){t.showElement()})),x.visible=1e3*w.currentTime-d+i.duration}))}if(n>=h&&!y){y=!0;var a=o.createTimer(t.start());C.push(a),a.then((function(){x.active=1e3*w.currentTime-h+a.duration})),t.onRendered().then((function(){t.activeElement()}));var p=t.on("onStatusChange",(function(e){return u(t,void 0,void 0,(function(){var t,n=this;return l(this,(function(i){switch(i.label){case 0:return Mt.finish!==e?[3,2]:(p(),[4,o.fade(this.node,"out").then((function(){n.hideElement()}))]);case 1:i.sent(),r&&(this._isForceFinish||(qe.inView||!s?null===(t=this.options.abilities)||void 0===t||t.toggleVideoState():o.logger.warn("light play won't continue video playback due to safePlayContinue strategy.")),setTimeout((function(){var t,e,r;(null===(e=null===(t=n.options)||void 0===t?void 0:t.abilities)||void 0===e?void 0:e.setCoverElesViewable)&&(null===(r=n.options.abilities)||void 0===r||r.setCoverElesViewable(!0))}),200)),qe.destroy([this]),i.label=2;case 2:return[2]}}))}))}))}if(n>=v&&!b&&r){b=!0;var g=0,E=function(){var e,n,r;null===(e=t.options.abilities)||void 0===e||e.toggleVideoState(),x.pauseTrigger=1e3*w.currentTime+g;var i=t.fixVideoState();return i.then((function(e){t.handleVideoUnexpectedContinue(e),x.pauseVideo=1e3*e.currentTime-v+g})),(null===(r=null===(n=t.options)||void 0===n?void 0:n.abilities)||void 0===r?void 0:r.setCoverElesViewable)&&t.options.abilities.setCoverElesViewable(!1),i};if(t.status>=Mt.rendered)C.push(E());else if(c){var T=o.createTimer(t.onRendered());x.forcePlayableVisible=!0,C.push(T.then((function(){return g=T.duration,E()})))}else{t._shouldShow=!1;var P=o.getPerformanceFn();t.onRendered().then((function(){t.forceFinish("mnpl_rendered_after_pause_video_time",{lateTime:P(),state:e.state,currentTime:e.currentTime,stateStr:f[e.state]})}))}}n>=_&&(S(),Promise.all(C).then((function(){var e={pauseVideo:r,visibleTime:d,activeTime:h,pauseVideoTime:v,activeGap:x.active,visibleGap:x.visible,pauseVideoGap:x.pauseVideo,pauseVideoTriggerTime:x.pauseTrigger,pauseVideoJSBTime:x.pauseVideo+v-x.pauseTrigger,forcePlayableVisible:x.forcePlayableVisible};t.trackService.sendTrack("mnpl_vedio_interactive_timegap",{gaps:[e],gapFirstObj:e})})))}}))}},e.prototype.fixVideoState=function(){var t=this;return new Promise((function(e){var n=t.proxySubscribe(g.a.videoStateChange,(function(t){t.state===f.PAUSE&&(e(t),n())}))}))},e.prototype.handleVideoUnexpectedContinue=function(t){var e=this,n=this.proxySubscribe(g.a.videoStateChange,(function(r){Math.abs(t.currentTime-r.currentTime)>.2&&(n(),e.forceFinish("video_unexpected_continue_play",{state:r.state,currentTime:r.currentTime,stateStr:f[r.state]}))}))},e.prototype.handleVideoException=function(){var t=this,e=this.proxySubscribe(g.a.videoStateChange,(function(n){-1!==[f.ERROR,f.COMPLETE].indexOf(n.state)&&t.status>=Mt.running&&(e(),t.forceFinish("video_state_exception",{state:n.state,currentTime:n.currentTime,stateStr:f[n.state]}))}))},e.prototype.forceFinish=function(t,e){this._isForceFinish=!0,this._setStatus(Mt.finish),this.trackService.sendTrack("mnpl_video_force_finish",c(c({},e),{reason:t}))},e.prototype.resolveGestureConflict=function(){var t;o.getIOSVersion().length?this.innerContainer.addEventListener("touchmove",this.preventGesture):this.options.abilities.preventTouchEvent&&(null===(t=this.options.abilities)||void 0===t||t.preventTouchEvent())},e.prototype.preventGesture=function(t){(null==t?void 0:t.preventDefault)&&(null==t||t.preventDefault())},e.prototype.onRendered=function(t){return this.onStatus(Mt.pendingRunning,t)},e.prototype.destroy=function(){return u(this,void 0,void 0,(function(){var e;return l(this,(function(n){try{this.audioControlService&&(this.audioControlService.mute=!0),this.playIcon&&this.playIcon.destroy(),this._inViewSubscription&&this._inViewSubscription(),this.playIcon=null,this.innerContainer.removeEventListener("touchmove",this.preventGesture),e=this.options.abilities.setCoverElesViewable,setTimeout((function(){e&&e(!0)}),200)}catch(t){o.logger.error(t)}return t.prototype.destroy.call(this),[2]}))}))},e}(re);!function(t){t[t.debug=0]="debug",t[t.info=1]="info",t[t.log=2]="log",t[t.warn=3]="warn",t[t.error=4]="error"}(we||(we={}));var Ce=new(function(){function t(t,e){this._level=we.warn,this._tag="",this._tag="["+t+"]",void 0!==e&&(this._level=e)}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._level>we.debug||console.debug.apply(console,p([this._tag],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._level>we.log||console.info.apply(console,p([this._tag],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.info.apply(this,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._level>we.warn||console.warn.apply(console,p([this._tag],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,p([this._tag],t))},t}())("LightPlaySDK");function Se(){try{!function(){if(void 0!==window.Howl&&void 0!==window.Howler&&!window.Howl.__mute_polyfilled){window.Howl.__mute_polyfilled=!0;var t=window,e=t.Howl,n=t.Howler,r=e.prototype.play;e.prototype.play=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{!this.mute()&&n._muted&&le()[0]<8&&this.mute(!0)}catch(t){console.error(t)}return r.apply(this,t)}}}()}catch(t){Ce.error(t)}}var Ee=n(120),Te=n.n(Ee),Pe="0x0@1x";function ke(){var t=document.body,e=t.clientHeight,n=t.clientWidth,r=window.devicePixelRatio||1;Pe=n+"x"+e+"@"+r+"x"}ht||(dt()(ke),window.addEventListener("resize",ke));var Oe="";function Me(){return Oe=Oe||[o.getAndroidVersion(),o.getIOSVersion()].filter((function(t){return t.length>0})).map((function(t){return t.filter((function(t){return null!=t})).join(".")})).join(""),{timestamp:(new Date).getTime(),refer:"mini_playable_track",os:o.isIOS?"iOS":"Android",page_resolution:Pe,renderer:location.protocol+"//"+location.host+location.pathname,os_version:Oe,light_play_sdk_version:"0.4.0-rc1",current_is_in_view:Number(ce.inView),express_showed:Number(ce.expressShowed),express_visible_duration:ce._afterExpressTimeFn(),rendererQuery:location.search,lightPlaySDKHashVersion:"61f2856"}}function Re(t){return parseInt(t||"0",16)}function Le(t,e){var n=function(t){if(!t||6!==t.length&&7!==t.length)return[0,0,0];var e=t.slice(-6);return[Re(e.substr(0,2)),Re(e.substr(2,2)),Re(e.substr(4,2))]}(t);return"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+e+")"}var Ie;function je(){return"data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M27.9612 12.4998C27.7823 12.164 27.3651 12.0369 27.0293 12.2159L26.1703 12.6737C25.1791 13.0983 24.375 13.9408 24.0361 15.053C23.9829 15.2277 23.943 15.4032 23.9157 15.5785H19.714C14.0075 15.5785 9.38135 20.2046 9.38135 25.9112C9.38135 31.6178 14.0075 36.2439 19.714 36.2439H29.3579C35.0645 36.2439 39.6906 31.6178 39.6906 25.9112C39.6906 20.2046 35.0645 15.5785 29.3579 15.5785H26.7975C26.8566 15.4906 26.9283 15.4135 27.0092 15.3489L28.3253 14.6474C28.661 14.4685 28.7881 14.0513 28.6092 13.7155L27.9612 12.4998ZM29.3579 18.3339H19.714C15.5292 18.3339 12.1367 21.7263 12.1367 25.9112C12.1367 30.096 15.5292 33.4885 19.714 33.4885H29.3579C33.5427 33.4885 36.9352 30.096 36.9352 25.9112C36.9352 21.7263 33.5427 18.3339 29.3579 18.3339ZM31.4231 25.217C32.5644 25.217 33.4896 24.2918 33.4896 23.1505C33.4896 22.0091 32.5644 21.0839 31.4231 21.0839C30.2818 21.0839 29.3566 22.0091 29.3566 23.1505C29.3566 24.2918 30.2818 25.217 31.4231 25.217ZM30.7401 28.6645C30.7401 29.8058 29.8149 30.731 28.6736 30.731C27.5323 30.731 26.6071 29.8058 26.6071 28.6645C26.6071 27.5232 27.5323 26.5979 28.6736 26.5979C29.8149 26.5979 30.7401 27.5232 30.7401 28.6645ZM19.0228 27.2831V30.0411C19.0228 30.4215 19.3313 30.7299 19.7117 30.7299H21.0894C21.4698 30.7299 21.7782 30.4215 21.7782 30.0411V27.2831H24.5362C24.9166 27.2831 25.225 26.9747 25.225 26.5943V25.2166C25.225 24.8362 24.9166 24.5278 24.5362 24.5278H21.7782V21.7749C21.7782 21.3945 21.4698 21.0861 21.0894 21.0861H19.7117C19.3313 21.0861 19.0228 21.3945 19.0228 21.7749V24.5278H16.27C15.8896 24.5278 15.5811 24.8362 15.5811 25.2166V26.5943C15.5811 26.9747 15.8896 27.2831 16.27 27.2831H19.0228Z" fill="white"/>\n  </svg>')}function Fe(){return"data:image/svg+xml;utf8,"+encodeURIComponent('\n  <svg width="68" height="68" viewBox="0 0 68 68" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect x="21.9203" y="45.1108" width="24.9753" height="2.67593" rx="1.33796" fill="white"/>\n  <rect x="32.6247" y="18.351" width="2.67593" height="24.9753" rx="1.33796" fill="white"/>\n  <path d="M23.7052 32.624L32.5353 41.4541C33.232 42.1507 34.3615 42.1507 35.0582 41.4541L43.8883 32.624" stroke="white" stroke-width="2.67593" stroke-linecap="round"/>\n  </svg>\n  ')}function Ne(t){return void 0===t&&(t=!0),{popup:t,progressBar:t,download:t}}!function(t){t.processBar="process-bar",t.downloadBtn="download-btn",t.loading="loading-el"}(Ie||(Ie={}));var Ae,Ve="tag",Be={clientX:0,clientY:0,time:(new Date).getTime()},Ue={progressMain:"progress-main",progressInnerWrap:"progress-inner-container",progressInner:"progress-inner",progressBar:"progress-bar",progressPopup:"progress-popup",progressPopupIcon:"progress-popup-icon",progressTipText:"progress-tip-text",downloadWrap:"download-wrap",downloadSvgWrap:"download-svg-wrap",downloadSvg:"download-svg",downloadIcon:"download-icon",styleNode:"style",gradientNodeVertical:"gradient-node-vertical",popupMain:"popup-main",popupMainSvg:"popup-main-svg"},De=["mouseup","mousedown","touchstart","touchend"],We=function(){function t(t){var e=this;this.scope=o.guid("loading_frame_"),this.classMap=Object.keys(Ue).reduce((function(t,n){var r=n;return t[r]=e.scope+"_"+Ue[r],t}),{}),this._touchPayload=[c({},Be),c({},Be)],this.handlePointer=function(t){var n=["touchstart","mousedown"].includes(t.type)?0:1;if("touchstart"===t.type||"touchend"===t.type){var r=t.changedTouches[0];e._touchPayload[n]={clientY:r.clientX,clientX:r.clientX,time:(new Date).getTime()}}else{var i=t;e._touchPayload[n]={clientX:i.clientX,clientY:i.clientY,time:(new Date).getTime()}}if(["touchend","mouseup"].includes(t.type)&&e.props.onTap){var o=t.currentTarget.getAttribute(Ve)||Ie.loading;e.props.onTap(t,e.clickInfo,o)}},this.props=t,this.scaleRatio=this.props.containerWidth/600,this.initHTML(),this.initNodes(),this.makeStyles(),this.updateNodes(),this.bindEvents()}return Object.defineProperty(t.prototype,"mainColor",{get:function(){var t=this.props.mainColor;return void 0===t?"#FF6F16":t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clickInfo",{get:function(){var t=this._touchPayload,e=t[0],n=t[1];return{up_x:n.clientX,up_y:n.clientY,up_time:n.time,down_x:e.clientX,down_y:e.clientY,down_time:e.time}},enumerable:!1,configurable:!0}),t.prototype.initHTML=function(){var t,e,n='\n    <div id="'+this.scope+'">\n      <style class="'+this.classMap.styleNode+'"></style>\n      <div class="'+this.classMap.progressMain+'" '+'tag="'+Ie.processBar+'">\n        <div class="'+this.classMap.progressInnerWrap+'">\n          <div class="'+this.classMap.progressInner+'">\n            <div style="width: 5%;" class="'+this.classMap.progressBar+" "+this.classMap.gradientNodeVertical+'">\n              <div class="'+this.classMap.progressPopup+'">\n                <div class="'+this.classMap.popupMain+'">\n                  '+(t="none",e=this.classMap.popupMainSvg,void 0===t&&(t="#fff"),void 0===e&&(e=""),'\n    <svg class="'+e+'" width="50" height="57" viewBox="0 0 50 57" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <g filter="url(#filter0_d)">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M28.8831 49.7007C40.8461 47.8351 50 37.4868 50 25.0005C50 11.1934 38.8071 0.000488281 25 0.000488281C11.1929 0.000488281 0 11.1934 0 25.0005C0 37.6759 9.43315 48.148 21.6622 49.7796L25.2426 54.4853L28.8831 49.7007Z" fill="white"/>\n      </g>\n      <circle cx="25" class="_fill_cls_name" cy="25.0005"  fill="'+t+'" r="22"/>\n      <circle cx="25" class="_filter_cls_name" cy="25.0005" r="22"  fill="url(#paint0_linear)" fill-opacity="0.5"/>\n      <defs>\n        <filter id="filter0_d" x="0" y="0.000488281" width="50" height="56.3624" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n          <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n          <feOffset dy="1.87755"/>\n          <feColorMatrix type="matrix" values="0 0 0 0 0.952941 0 0 0 0 0.407843 0 0 0 0 0.0705882 0 0 0 1 0"/>\n          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n        </filter>\n        <linearGradient id="paint0_linear" x1="25" y1="3.00049" x2="25" y2="47.0005" gradientUnits="userSpaceOnUse">\n          <stop stop-color="white"/>\n          <stop offset="1" stop-color="white" stop-opacity="0"/>\n        </linearGradient>\n      </defs>\n    </svg>\n  \n                  <img class="')+this.classMap.progressPopupIcon+'" src="'+je()+'" />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <p class="'+this.classMap.progressTipText+'"></p>\n      </div>\n      <div class="'+this.classMap.downloadWrap+'" '+'tag="'+Ie.downloadBtn+'">\n        <div class="'+this.classMap.downloadSvgWrap+'">\n          '+function(t){return void 0===t&&(t=""),'\n  <svg class="'+t+'" xmlns="http://www.w3.org/2000/svg" width="68" height="68" viewBox="0 0 68 68" fill="none">\n    <rect x="1.5" y="1.5" width="65" class="_fill_cls_name" height="65" rx="32.5" fill="#FF6F16" stroke="white" stroke-width="3"/>\n    <rect class="_filter_cls_name" width="68" height="68" rx="34" fill="url(#paint0_linear)" fill-opacity="0.5"/>\n    <defs>\n      <linearGradient id="paint0_linear" x1="34" y1="0" x2="34" y2="68" gradientUnits="userSpaceOnUse">\n        <stop stop-color="white"/>\n        <stop offset="1" stop-color="white" stop-opacity="0"/>\n      </linearGradient>\n    </defs>\n  </svg>'}(this.classMap.downloadSvg)+'\n        </div>\n        <img class="'+this.classMap.downloadIcon+'" src="'+Fe()+'" />\n      </div>\n    </div>\n    ';this.node=o.htmlStrToNode(n)},t.prototype.queryNode=function(t){return this.node.querySelector(t)},t.prototype.initNodes=function(){this.styleNodeEl=this.queryNode("."+this.classMap.styleNode),this.progressBarEl=this.queryNode("."+this.classMap.progressBar),this.popupIconEl=this.queryNode("."+this.classMap.progressPopupIcon),this.downloadIconEl=this.queryNode("."+this.classMap.downloadIcon),this.downloadWrapEl=this.queryNode("."+this.classMap.downloadWrap),this.tipTextEl=this.queryNode("."+this.classMap.progressTipText),this.mainEl=this.queryNode("."+this.classMap.progressMain)},t.prototype.updateNodes=function(){var t=this.props,e=t.downloadIcon,n=void 0===e||e,r=t.progressBarIcon,i=void 0===r?je():r,o=t.text,s=void 0===o?"即将开启互动小游戏":o;if(this.popupIconEl.src=i,this.tipTextEl.innerText=s,n){this.downloadWrapEl.style.display="";var a="object"==typeof n&&n.icon;this.downloadIconEl.src=a||Fe()}else this.downloadWrapEl.style.display="none";this.getGradient().progressBar?this.progressBarEl.classList.add(this.classMap.gradientNodeVertical):this.progressBarEl.classList.remove(this.classMap.gradientNodeVertical)},t.prototype.updatePercent=function(t){isNaN(t)&&(o.logger.warn("传入的加载进度不是一个数字"),t=0),(t>1||t<0)&&o.logger.warn("进度只能介于 [0, 1] 之间");var e=(100*Math.min(1,Math.max(0,t))).toFixed(2);this.progressBarEl.style.width=e+"%"},t.prototype.bindEvents=function(){var t=this,e=[this.mainEl,this.downloadWrapEl];De.forEach((function(n){e.forEach((function(e){e.addEventListener(n,t.handlePointer)}))}))},t.prototype.cancelEvents=function(){var t=this,e=[this.mainEl,this.downloadWrapEl];De.forEach((function(n){e.forEach((function(e){e.removeEventListener(n,t.handlePointer)}))}))},t.prototype.getFillColor=function(){var t=this.mainColor,e=this.props.fillColor,n={popup:t,progressBar:t,progressBg:Le(t,.2),download:t};if("string"==typeof e)n.popup=n.progressBar=n.progressBg=n.download=e;else if(Te()(e)){var r=e,i=r.popup,o=r.progressBar,s=r.progressBg,a=r.download;n.popup=i||t,n.progressBar=o||t,n.progressBar=s||t,n.download=a||t}return n},t.prototype.getGradient=function(){var t=Ne(!0),e=this.props.gradient,n=void 0===e||e;if(!n)return Ne(!1);if(Te()(n)){var r=n,i=r.popup,o=void 0===i||i,s=r.download,a=void 0===s||s,c=r.progressBar,u=void 0===c||c;t.popup=o,t.download=a,t.progressBar=u}return t},t.prototype.getPosition=function(){var t={top:"top: 2.36em;",x:"right: 0.2em;"},e=this.props.position||{},n=e.left,r=e.right,i=e.top;return i&&(t.top="top: "+i+";"),n&&r?(o.logger.warn("position 同时提供 left 和 right 则使用 right"),t.x="right: "+r+";"):n?t.x="left: "+n+";":r&&(t.x="right: "+r+";"),t},t.prototype.makeStyles=function(){var t=100*this.scaleRatio;this.styleNodeEl.innerHTML="\n      #"+this.scope+" {\n        font-size: "+t+"px;\n        width: 6em;\n\n        position: absolute;\n        "+this.getPosition().top+"\n        pointer-events: none;\n        visibility: visible;\n      }\n\n      #"+this.scope+"::before {\n        content: '';\n        position: absolute;\n        width: 6em;\n        height: 1.68em;\n        top: -0.66em;\n        left: 0;\n        z-index: 0;\n        pointer-events: none;\n        background: linear-gradient(180deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, 0.236) 26.56%, rgba(22, 24, 35, 0.276) 34.9%, rgba(22, 24, 35, 0.276) 75.52%, rgba(22, 24, 35, 0.236) 81.25%, rgba(22, 24, 35, 0) 100%);\n      }\n\n      #"+this.scope+" ."+this.classMap.progressMain+",\n      #"+this.scope+" ."+this.classMap.downloadWrap+" {\n        pointer-events: all;\n      }\n\n      #"+this.scope+",\n      #"+this.scope+" * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressBar+" {\n        background-color: "+this.getFillColor().progressBar+";\n        height: 100%;\n        border-radius: 20px;\n        position: relative;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressPopup+" {\n        position: absolute;\n        right: 0;\n        top: -0.62em;\n        transform: translateX(50%);\n        width: 0.50em;\n        height: 0.56em;\n      }\n\n      #"+this.scope+" ."+this.classMap.gradientNodeVertical+"::after {\n        content: ' ';\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(180deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n        border-radius: 150px;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressInner+" {\n        background-color: "+this.getFillColor().progressBg+";\n        border: 0.04em solid #ffffff;\n        border-radius: 22px;\n        height: 0.22em;\n        width: 3em;\n        position: relative;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressInnerWrap+" {\n        background-color: #fff;\n        border-radius: 100px;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressMain+" {\n        width: 3em;\n        border-radius: 100px;\n        margin-left: 1.5em;\n        position: relative;\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMain+" {\n        width: 0.5em;\n        height: 0.5em;\n        position: relative;\n        border-radius: 50%;\n        display: flex;\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMain+" img {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        display: block;\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMainSvg+" {\n        width: 0.5em;\n        height: 0.57em;\n        position: absolute;\n        top: 0;\n        left: 0;\n      }\n\n      #"+this.scope+" ."+this.classMap.progressTipText+" {\n        display: block;\n        line-height: 1.4em;\n        font-size: 0.2em;\n        margin-top: 0.6em;\n        text-align: center;\n        color: #fff;\n        font-weight: 400;\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMainSvg+" ."+"_fill_cls_name {\n        fill: "+this.getFillColor().popup+";\n      }\n\n      #"+this.scope+" ."+this.classMap.downloadSvgWrap+" ."+"_fill_cls_name {\n        fill: "+this.getFillColor().download+"\n      }\n\n      #"+this.scope+" ."+this.classMap.popupMainSvg+" ."+"_filter_cls_name {\n        "+(this.getGradient().popup?"":"fill: none;")+"\n      }\n      #"+this.scope+" ."+this.classMap.downloadSvg+" ."+"_filter_cls_name {\n        "+(this.getGradient().download?"":"fill: none;")+"\n      }\n\n      #"+this.scope+" ."+this.classMap.downloadWrap+" {\n        position: absolute;\n        "+this.getPosition().x+"\n        bottom: 0;\n        width: 0.68em;\n        height: 0.68em;\n        display: flex;\n      }\n\n      #"+this.scope+" ."+this.classMap.downloadSvg+" {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 0.68em;\n        height: 0.68em;\n      }\n\n      #"+this.scope+" ."+this.classMap.downloadIcon+" {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        display: block;\n      }\n    "},t.prototype.destroy=function(){this.cancelEvents(),this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},t}();function He(t){return u(this,void 0,void 0,(function(){var e,n,r,o,s;return l(this,(function(a){switch(a.label){case 0:return e=t.scriptUrl,n=t.scriptRetryTimes,r=void 0===n?0:n,o=t.scriptAsync,s=void 0===o||o,[4,i.loadComponent({retryTimes:r,src:e,async:s})];case 1:return a.sent(),[2,i.getPlayableComponent(e)]}}))}))}function ze(t){var e,n,r,i,s,a;return u(this,void 0,void 0,(function(){var u,p,d,h,f,v,m,g,y,b,_,w,x,C,S,E,T,P,k,O,M,R,L,I,j,F,N;return l(this,(function(l){switch(l.label){case 0:return u=o.getPerformanceFn(),p=t.containerSize,d=t.scriptUrl,h=t.resources,f=void 0===h?[]:h,v=t.maxConcurrency,m=void 0===v?8:v,g={size:p,scriptUrl:d},t.abilities.track=function(t,e){var n=e.scriptUrl,r=e.size,i=r.width+"x"+r.height;return function(e,r){if(t)return t(e,c(c(c({},r),{playable_component_url:n,container_size:i}),Me()));o.logger.warn("[Ability Missing], track is not present")}}(t.abilities.track,g),t.abilities.trackClick=function(t,e){var n=e.scriptUrl,r=e.size,i=r.width+"x"+r.height;return function(e){if(t)return t(c(c(c({},e),{playable_component_url:n,container_size:i}),Me()));o.logger.warn("[Ability Missing], trackClick is not present")}}(t.abilities.trackClick,g),y=Math.min(35,Math.max(1,m)),b=new zt(f,!0,y),null===(e=t.abilities)||void 0===e||e.track("mnpl_js_start_load"),_=o.createTimer(He(t)),b.resList.length?(null===(n=t.abilities)||void 0===n||n.track("mnpl_resource_start_preload",{resources:b.resList}),x=b.preload(),(C=o.createTimer(x)).then((function(){var e;null===(e=t.abilities)||void 0===e||e.track("mnpl_resource_finish_preload",{preload_resource_duration:C.duration})}))):x=b.preload(),S=t.loadingFrame,E=t.__fakeSleep,T=void 0===E?0:E,P=o.wait(T),S&&(k=b.resList.length+1,O=0,M={},Te()(S)&&Object.assign(M,S),R=c(c({},M),{onTap:function(e,n,r){t.abilities.trackClick({clickInfo:n,custom_element_type:"LIGHT_PLAY_LOADING"}),t.abilities.track("mnpl_click_loading_area",{area_tag:r})},container:t.container,containerWidth:t.containerSize.width}),L=new We(R),t.container.appendChild(L.node),I=function(){var t=(O+=1)/k;L.updatePercent(t),t>=1&&P.then((function(){o.fade(L.node,"out").then((function(){L.destroy()}))}))},_.then((function(){I()})),x.onProgress((function(){I()}))),j=oe(t.timeout).loadScript,T>0?[4,P]:[3,2];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,4,,5]),[4,_];case 3:return w=l.sent(),null===(r=t.abilities)||void 0===r||r.track("mnpl_js_finish_load",{load_js_duration:_.duration}),j&&_.duration>j&&(null===(i=t.abilities)||void 0===i||i.track("mnpl_js_load_timeout",{duration:_.duration})),[3,5];case 4:throw F=l.sent(),null===(s=t.abilities)||void 0===s||s.track("mnpl_js_load_error",{message:null!==(a=F.message)&&void 0!==a?a:"load_failed"}),F;case 5:return N=u(),[2,{loader:b,options:t,component:w,perfTimeFn:u,jsLoadTime:N}]}}))}))}var Ge=((Ae=function(){function t(){}return Object.defineProperty(t,"inView",{get:function(){return ce.inView},set:function(t){ce.inView=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"expressShow",{get:function(){return ce.expressShowed},set:function(t){ce.expressShowed=t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"adVisible",{get:function(){return ce.adVisible},enumerable:!1,configurable:!0}),Object.defineProperty(t,"adVisibleOnce",{get:function(){return ce.adVisibleOnce},enumerable:!1,configurable:!0}),t.broadcastEvent=function(t,e){if(t===g.a.inViewChange&&(Ge.inView=Boolean(e)),t===g.a.expressShow&&(Ge.expressShow||(ce._afterExpressTimeFn=o.getPerformanceFn()),Ge.expressShow=Boolean(e)),t===g.a.resetSDK&&(this.broadcastEvent(g.a.inViewChange,!1),this.broadcastEvent(g.a.expressShow,!1)),t===g.a.adVisible){var n=Boolean(e);ce.adVisible=n,n&&(ce.adVisibleOnce=n)}Ge.emitter.emit(t,e)},t.create=function(t){var e,n;return u(this,void 0,void 0,(function(){var r,i,s,a,u,p,d,f,v,m,g,y,b,_,w,x,C,S,E;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),"then"in t?[4,t]:[3,2];case 1:return s=l.sent(),[3,4];case 2:return[4,ze(t)];case 3:s=l.sent(),l.label=4;case 4:return r=s,[3,6];case 5:return l.sent(),[2,{node:null,success:!1}];case 6:a=r.options,u=r.component,p=r.jsLoadTime,d=r.perfTimeFn,f=r.loader,Se();try{v=o.getPerformanceFn(),m=a.videoControls,g=void 0===m?[]:m,y=a.playIcon,b=void 0!==y&&y,_=a.abilities,w=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(a,["videoControls","playIcon","abilities"]),x=c(c({},w),{abilities:_,subscribe:Ge.emitter.on.bind(Ge.emitter),playIcon:b,component:u,loader:f,perfTimeFn:d,defaultMuted:!((null===(e=w.sys_control)||void 0===e?void 0:e.voice_control)===h.notMute)}),g[0]&&(x.videoControl=g[0]),(i=new xe(x)).performance.js_load_time=p,i.performance.instance_construct_time=v()}catch(t){return C=(null==t?void 0:t.message)||"construct failed",console.log("e",t),null===(n=a.abilities)||void 0===n||n.track("light_play_uncaught_error",{_given_id:a.id,reason:C}),[2,{node:null,success:!1,reason:C}]}l.label=7;case 7:return l.trys.push([7,9,,10]),[4,i.autoRender()];case 8:return l.sent(),Ge._instances.push(i),[2,{node:i.node,success:!0}];case 9:return S=l.sent(),E=i&&i.errorCode,i&&i.destroy().catch((function(t){console.error(t)})),[2,{node:null,success:!1,reason:E||(null==S?void 0:S.message)||"UNKNOWN_REASON"}];case 10:return[2]}}))}))},t.destroy=function(t){return u(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,Promise.all((t||Ge._instances).map((function(t){var e=Ge._instances.indexOf(t);return-1!==e&&(Ge._instances[e]=null),t&&t.destroy&&t.destroy?t.destroy():Promise.resolve()})))];case 1:return e.sent(),Ge._instances=Ge._instances.filter(Boolean),[2]}}))}))},t.createEventEmitter=function(){return new It},t}()).Version="0.4.0-rc1",Ae.HashVersion="61f2856",Ae.emitter=new It,Ae._instances=[],Ae._loadComponent=He,Ae),qe=e.default=Ge},361:function(t,e,n){(function(e){for(var r=n(374),i="undefined"==typeof window?e:window,o=["moz","webkit"],s="AnimationFrame",a=i["request"+s],c=i["cancel"+s]||i["cancelRequest"+s],u=0;!a&&u<o.length;u++)a=i[o[u]+"Request"+s],c=i[o[u]+"Cancel"+s]||i[o[u]+"CancelRequest"+s];if(!a||!c){var l=0,p=0,d=[];a=function(t){if(0===d.length){var e=r(),n=Math.max(0,16.666666666666668-(e-l));l=n+e,setTimeout((function(){var t=d.slice(0);d.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(n))}return d.push({handle:++p,callback:t,cancelled:!1}),p},c=function(t){for(var e=0;e<d.length;e++)d[e].handle===t&&(d[e].cancelled=!0)}}t.exports=function(t){return a.call(i,t)},t.exports.cancel=function(){c.apply(i,arguments)},t.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=a,t.cancelAnimationFrame=c}}).call(this,n(85))},365:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},366:function(t,e,n){var r=n(377),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},367:function(t,e,n){var r=n(368),i=n(382),o=n(383),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},368:function(t,e,n){var r=n(366).Symbol;t.exports=r},369:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},374:function(t,e,n){(function(e){(function(){var n,r,i,o,s,a;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=e&&e.hrtime?(t.exports=function(){return(n()-s)/1e6},r=e.hrtime,o=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})(),a=1e9*e.uptime(),s=o-a):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(213))},375:function(t,e,n){var r=n(365),i=n(376),o=n(378),s=Math.max,a=Math.min;t.exports=function(t,e,n){var c,u,l,p,d,h,f=0,v=!1,m=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=c,r=u;return c=u=void 0,f=e,p=t.apply(r,n)}function b(t){return f=t,d=setTimeout(w,e),v?y(t):p}function _(t){var n=t-h;return void 0===h||n>=e||n<0||m&&t-f>=l}function w(){var t=i();if(_(t))return x(t);d=setTimeout(w,function(t){var n=e-(t-h);return m?a(n,l-(t-f)):n}(t))}function x(t){return d=void 0,g&&c?y(t):(c=u=void 0,p)}function C(){var t=i(),n=_(t);if(c=arguments,u=this,h=t,n){if(void 0===d)return b(h);if(m)return clearTimeout(d),d=setTimeout(w,e),y(h)}return void 0===d&&(d=setTimeout(w,e)),p}return e=o(e)||0,r(n)&&(v=!!n.leading,l=(m="maxWait"in n)?s(o(n.maxWait)||0,e):l,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==d&&clearTimeout(d),f=0,c=h=u=d=void 0},C.flush=function(){return void 0===d?p:x(i())},C}},376:function(t,e,n){var r=n(366);t.exports=function(){return r.Date.now()}},377:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(85))},378:function(t,e,n){var r=n(379),i=n(365),o=n(381),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):s.test(t)?NaN:+t}},379:function(t,e,n){var r=n(380),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},380:function(t,e){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},381:function(t,e,n){var r=n(367),i=n(369);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},382:function(t,e,n){var r=n(368),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},383:function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},384:function(t,e,n){var r=n(367),i=n(385),o=n(369),s=Function.prototype,a=Object.prototype,c=s.toString,u=a.hasOwnProperty,l=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},385:function(t,e,n){var r=n(386)(Object.getPrototypeOf,Object);t.exports=r},386:function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},387:function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(n,r){function i(){void 0!==o&&t.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==e&&(o=function(n){t.removeListener(e,i),r(n)},t.once("error",o)),t.once(e,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function p(t,e,n,r){var i,o,s,a;if(u(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(t))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function v(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)o(c,this,e);else{var u=c.length,l=m(c,u);for(n=0;n<u;++n)o(l[n],this,e)}return!0},a.prototype.addListener=function(t,e){return p(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return p(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,h(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,o,s;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},a.prototype.listenerCount=v,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}}}]);